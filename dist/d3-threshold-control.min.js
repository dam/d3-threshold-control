(function(){d3.threshold_control=function(g){function b(a){var b;d||(d="y");a.each(function(){var a=d3.select(this),c,g=h.range()[0],m=h.range()[1];c=k.range()[0];var q=k.range()[1];a.attr("class","threshold-control-container");"y"===d?(l=a.append("line").attr("x1",c-e.lt_margin).attr("y1",m).attr("x2",q+e.rb_margin).attr("y2",m),c=n(h.domain()[1])):(l=a.append("line").attr("x1",c).attr("y1",g-e.lt_margin).attr("x2",c).attr("y2",m+e.rb_margin),c=p(k.domain()[0]));l.attr("class","threshold-control-line");
r=a.append("text").attr("dx",function(){return e.dx_label}).attr("dy",function(){return e.dy_label}).attr("class","threshold-control-label").text(c);a=d3.behavior.drag().on("drag",function(a,e){var c,f;if("y"===d)if(d3.event.y>=m&&d3.event.y<=g)c="translate(0,"+d3.event.y+")",b=h.invert(d3.event.y),f=n(b);else return;else if(d3.event.x>=mmin_x_scale&&d3.event.x<=q)c="translate("+d3.event.x+",0)",b=k.invert(d3.event.x),f=p(b);else return;l.attr("transform",c);r.attr("transform",c).text(f)}).on("dragend",
function(){var a;a=f.filter(function(a){return e.comparator(a[d],b)});s.threshold(a)});l.call(a)})}var k=d3.scale.linear(),h=d3.scale.linear(),s=d3.dispatch("threshold"),p,n,d,l,r,f=[],e={lt_margin:10,rb_margin:10,dx_label:-10,dy_label:-5,comparator:function(a,b){return a>b}};g=d3.map(g);g.forEach(function(a,b){e[a]=b});b.x=function(a){if(!arguments.length)return k;k=a;d||(d="x");return b};b.y=function(a){if(!arguments.length)return h;h=a;d||(d="y");return b};b.xLabelFormat=function(a){if(!arguments.length)return p;
p=a;return b};b.yLabelFormat=function(a){if(!arguments.length)return n;n=a;return b};b.event=function(){return s};b.data=function(a){if(!arguments.length)return f;f=a;return b};return b}})();